---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ixapi_connection Resource - terraform-provider-ixapi"
subcategory: ""
description: |-
  Use the ixapi_connection resource to create a new connection and allocate ports. Adding and managing ports can be done using the ixapi_port_reservation resource.
---

# ixapi_connection (Resource)

Use the `ixapi_connection` resource to create a new connection and allocate ports. Adding and managing ports can be done using the `ixapi_port_reservation` resource.

## Example Usage

```terraform
# Get a connection product offering in order to participate
# in the metro area network fra1 from the 'Multi-Tiered Data DC41'
# datacenter.
data "ixapi_metro_area_network" "fra" {
  name = "fra1"  
}

data "ixapi_facility" "dc1" {
  name = "Multi-Tiered Data DC41"
}

# The connection will be orderered for a reseller account
data "ixapi_account" "reseller" {
  external_ref = "demo_reseller"
}

data "ixapi_pop" "dc1_fra1" {
  facility = data.ixapi_facility.dc1.id
  metro_area_network = data.ixapi_metro_area_network.fra.id
}

data "ixapi_product_offering_connection" "dc1_fra" {
  handover_pop = data.ixapi_pop.dc1_fra1.id
  cross_connect_initiator = "exchange"
}

data "ixapi_role_assignment" "impl" {
  consuming_account = data.ixapi_account.reseller.id
  role = "implementation"
}

locals {
  product = data.ixapi_product_offering_connection.dc1_fra.id
  reseller = data.ixapi_account.reseller.id
  impl = data.ixapi_role_assignment.impl.id
}

# Create connection with 4 ports
resource "ixapi_connection" "fra1" {
  product_offering = local.product
  managing_account = local.reseller
  consuming_account = local.reseller
  billing_account = local.reseller
  role_assignments = [ local.impl ]
  subscriber_side_demarcs = [ "patch-20-49-1", "patch-20-49-2" ]
  mode = "lag_lacp"
  port_quantity = 4
}

output "connection" {
  value = resource.ixapi_connection.fra1
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `billing_account` (String) An account requires billing_information to be used as a `billing_account`. *(Sensitive Property)*
- `consuming_account` (String) The `id` of the account consuming a service.  Used to be `owning_customer`.
- `managing_account` (String) The `id` of the account responsible for managing the service via the API. A manager can read and update the state of entities.
- `mode` (String) Sets the mode of the connection. The mode can be:  - `lag_lacp`: connection is build as a LAG with LACP enabled - `lag_static`: connection is build as LAG with static configuration - `flex_ethernet`: connect is build as a FlexEthernet channel - `standalone`: only one port is allowed in this connection without any bundling.
- `port_quantity` (Number) The number of ports which should be allocated for this connection.
- `product_offering` (String) The product offering must match the type `connection`.
- `role_assignments` (List of String)

### Optional

- `capacity_allocated` (Number) Sum of the bandwidth of all network services using the connection in Mbit/s.
- `capacity_allocation_limit` (Number) Maximum allocatable capacity of the connection in Mbit/s. When `null`, the exchange does not impose any limit.
- `charged_until` (String) The service continues incurring charges until this date. Typically `â‰¥ decommission_at`.  This field is only used when the state is `DECOMMISSION_REQUESTED` or `DECOMMISSIONED`.  *(Sensitive Property)*
- `connecting_party` (String) Name of the service provider who establishes connectivity on your behalf.  This is only relevant, if the cross connect initiator is the `subscriber` and might be `null`.  Please refer to the usage guide of the internet exchange.
- `contract_ref` (String) A reference to a contract. If no specific contract is used, a default MAY be chosen by the implementer. *(Sensitive Property)*
- `current_billing_start_date` (String) Your obligation to pay for the service will start on this date.  However, this date may change after an upgrade and not reflect the inital start date of the service.  *(Sensitive Property)*
- `decommission_at` (String) The service will be decommissioned on this date.  This field is only used when the state is `DECOMMISSION_REQUESTED` or `DECOMMISSIONED`.
- `external_ref` (String) Reference field, free to use for the API user. *(Sensitive Property)*
- `lacp_timeout` (String) This sets the LACP Timeout mode. Both ends of the connections need to be configured the same.
- `name` (String)
- `outer_vlan_ethertypes` (List of String)
- `pop` (String) The ID of the point of presence (see `/pops`), where the physical port(s) are present.
- `port_reservations` (List of String)
- `ports` (List of String)
- `purchase_order` (String) Purchase Order ID which will be displayed on the invoice. *(Sensitive Property)*
- `speed` (Number) Shows the total bandwidth of the connection in Mbit/s.
- `state` (String)
- `status` (Block List) (see [below for nested schema](#nestedblock--status))
- `subscriber_side_demarcs` (List of String)
- `vlan_types` (List of String)

### Read-Only

- `id` (String) The ID of this resource.

<a id="nestedblock--status"></a>
### Nested Schema for `status`

Optional:

- `message` (String) A human readable message, describing the problem and may contain hints for resolution.
- `severity` (Number) We are using syslog severity levels: 0 = Emergency, 1 = Alert, 2 = Critical, 3 = Error, 4 = Warning, 5 = Notice, 6 = Informational, 7 = Debug.
- `tag` (String) A machine readable message identifier.
- `timestamp` (String) The time and date when the event occured.


